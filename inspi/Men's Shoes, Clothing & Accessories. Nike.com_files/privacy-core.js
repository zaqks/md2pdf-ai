/*! For license information please see privacy-core.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.privacyCore=t():e.privacyCore=t()}(this,(()=>(()=>{var e={496:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return{getItem:function(e){return new Promise((function(r,n){r(t.getItem(e))}))},setItem:function(e,r){return new Promise((function(n,o){n(t.setItem(e,r))}))},removeItem:function(e){return new Promise((function(r,n){r(t.removeItem(e))}))}}};var n,o=(n=r(821))&&n.__esModule?n:{default:n}},821:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:o};var o={getItem:n,setItem:n,removeItem:n}},110:(e,t,r)=>{"use strict";var n;t.A=void 0;var o=(0,((n=r(496))&&n.__esModule?n:{default:n}).default)("local");t.A=o},574:(e,t,r)=>{"use strict";r.r(t);var n=r(801),o=r(330);if(!window.__gpcTrackInjected){const e=e=>{e.persisted||(async()=>{var e;try{if(!(null===(e=window.webShellClient)||void 0===e?void 0:e.identity))throw new Error("web shell identity does not exist");const{getIsLoggedIn:t}=window.webShellClient.identity,r=navigator.globalPrivacyControl,i=await t(),s=(0,n.fc)(o.rr.GPC_ENABLED),a={geolocation:(0,n.QF)(),user_type:(0,n.lo)(i),gpc:r};if(i)return void(0,n.SW)(s,{...a,registered_country:await(0,n.ox)(i)});(0,n.SW)(s,a)}catch(e){return}})()};window.addEventListener("pageshow",e),window.addEventListener("pagehide",(t=>{t.persisted||(window.removeEventListener("pageshow",e),window.__gpcTrackInjected=!1)})),window.__gpcTrackInjected=!0}},115:function(e,t,r){var n,o,i,s,a,c,u,l,E,p,d,f,_,m,T,S;i=function(e,t,r){if(!E(t)||d(t)||f(t)||_(t)||l(t))return t;var n,o=0,s=0;if(p(t))for(n=[],s=t.length;o<s;o++)n.push(i(e,t[o],r));else for(var a in n={},t)Object.prototype.hasOwnProperty.call(t,a)&&(n[e(a,r)]=i(e,t[a],r));return n},s=function(e){return m(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)},a=function(e){var t=s(e);return t.substr(0,1).toUpperCase()+t.substr(1)},c=function(e,t){return function(e,t){var r=(t=t||{}).separator||"_",n=t.split||/(?=[A-Z])/;return e.split(n).join(r)}(e,t).toLowerCase()},u=Object.prototype.toString,l=function(e){return"function"==typeof e},E=function(e){return e===Object(e)},p=function(e){return"[object Array]"==u.call(e)},d=function(e){return"[object Date]"==u.call(e)},f=function(e){return"[object RegExp]"==u.call(e)},_=function(e){return"[object Boolean]"==u.call(e)},m=function(e){return(e-=0)==e},T=function(e,t){var r=t&&"process"in t?t.process:t;return"function"!=typeof r?e:function(t,n){return r(t,e,n)}},S={camelize:s,decamelize:c,pascalize:a,depascalize:c,camelizeKeys:function(e,t){return i(T(s,t),e)},decamelizeKeys:function(e,t){return i(T(c,t),e,t)},pascalizeKeys:function(e,t){return i(T(a,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},void 0===(o="function"==typeof(n=S)?n.call(t,r,t,e):n)||(e.exports=o)},900:(e,t,r)=>{var n,o,i;void 0===(o="function"==typeof(n=i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(r);/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+a}}function s(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return s(e,!1)},o.getJSON=function(e){return s(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))})?n.call(t,r,t,e):n)||(e.exports=o),e.exports=i()},330:(e,t,r)=>{"use strict";r.d(t,{$Q:()=>i,B1:()=>S,Eg:()=>y,Ij:()=>f,Ng:()=>u,Nx:()=>d,P2:()=>E,S_:()=>m,V2:()=>s,_r:()=>c,aR:()=>_,p:()=>p,rr:()=>I,v_:()=>o,wR:()=>T,x4:()=>l,xX:()=>g});var n=r(215);const o="purposeLimitations",i="contextFrames",s=2,a=n.A.get("ni_cf_override")||"_v2",c="ni_c",u="sq",l={WEB_GUEST_MODAL:`webGuestModal${a}`,WEB_MEMBER_MODAL:`webMemberModal${a}`,WEB_MEMBER_SETTINGS:`webMemberSettings${a}`,WEB_GUEST_SETTINGS:`webGuestSettings${a}`},E={WEB_GUEST_MODAL:`web_guest_modal${a}`,WEB_MEMBER_MODAL:`web_member_modal${a}`,WEB_MEMBER_SETTINGS:`web_member_settings${a}`,WEB_GUEST_SETTINGS:`web_guest_settings${a}`};let p=function(e){return e.PERSONALIZATION_RECOMMENDATION="personalizationRecommendation",e.TARGETING_BEHAVIORAL_EVENTS="adtargetingBehavioralevents",e.PERFORMANCE="performance",e.TARGETING_HASHEDMATCH="adtargetingHashedmatch",e.PERSONALIZATION_TARGETED_COMMS="personalizationTargetedComms",e}({}),d=function(e){return e.PERSONALIZATION_RECOMMENDATION="personalization_recommendation",e.TARGETING_BEHAVIORAL_EVENTS="adtargeting_behavioralevents",e.PERFORMANCE="performance",e.TARGETING_HASHEDMATCH="adtargeting_hashedmatch",e.PERSONALIZATION_TARGETED_COMMS="personalization_targeted_comms",e}({}),f=function(e){return e.TARGETING_BEHAVIORAL_EVENTS="BEAD",e.PERFORMANCE="PERF",e.TARGETING_HASHEDMATCH="1PA",e.PERSONALIZATION_TARGETED_COMMS="PERS",e}({}),_=function(e){return e.ACCEPT="accept",e.DECLINE="decline",e.DEFAULT_ACCEPT="default_accept",e.DEFAULT_DECLINE="default_decline",e}({}),m=function(e){return e.DIRECT="DIRECT",e.ADVERTISING_DATA_SHARING_GPC_SWITCH="ADVERTISING_DATA_SHARING_GPC_SWITCH",e.ADVERTISING_DATA_SHARING_CPRA_SWITCH="ADVERTISING_DATA_SHARING_CPRA_SWITCH",e}({});const T="@nikePrivacyCoreCustomEvent/";let S=function(e){return e.INITIALIZED="initialized",e.INITIALIZE_ERROR="initializeError",e.CONTEXT_FRAMES_GET_ERROR="contextFramesGetError",e.PERMISSIONS_UPDATING="permissionsUpdating",e.PERMISSIONS_UPDATED="permissionsUpdated",e.PERMISSIONS_GET_ERROR="permissionsGetError",e.PERMISSIONS_UPDATE_ERROR="permissionsUpdateError",e}({}),I=function(e){return e.SETTINGS_PAGE_VIEWED="settingsPageViewed",e.ACCEPT_ALL_CLICKED="acceptAllClicked",e.DECLINE_ALL_CLICKED="declineAllClicked",e.CONFIRM_CHOICE_CLICKED="confirmChoiceClicked",e.GPC_ENABLED="gpcEnabled",e}({}),g=function(e){return e.PRIVACY_SETTINGS_VIEWED="PrivacySettingsViewed",e.PRIVACY_SETTINGS_ACCEPT_ALL="PrivacySettingsAcceptAll",e.PRIVACY_SETTINGS_DECLINE_ALL="PrivacySettingsDeclineAll",e.PRIVACY_SETTINGS_CONFIRM_CHOICES="PrivacySettingsConfirmChoices",e.GPC_ENABLED="gpcEnabled",e.PRIVACY_CORE_API_ERROR="privacyCoreAPIError",e.INITIALIZE_ERROR="initializeError",e.PERMISSIONS_GET_ERROR="permissionsGetError",e.CONTEXT_FRAMES_GET_ERROR="contextFramesGetError",e.PERMISSIONS_UPDATE_ERROR="permissionsUpdateError",e}({});const y="cookie-modal-base"},801:(e,t,r)=>{"use strict";r.d(t,{QF:()=>a,SW:()=>i,fc:()=>u,lo:()=>s,ox:()=>c});var n=r(215),o=r(330);const i=(e,t)=>{try{var r;if(!e)return;null!==(r=window.newrelic)&&void 0!==r&&r.addPageAction&&window.newrelic.addPageAction(e,t)}catch(e){}},s=e=>e?"member":"guest",a=()=>n.A.get("geoloc")||"",c=async e=>{var t,r,n,o;return e?null===(t=await(null===(r=window.webShellClient)||void 0===r||null===(n=r.identity)||void 0===n||null===(o=n.getUserProfile)||void 0===o?void 0:o.call(n)))||void 0===t?void 0:t.registeredCountry:""},u=e=>{switch(e){case o.rr.SETTINGS_PAGE_VIEWED:return o.xX.PRIVACY_SETTINGS_VIEWED;case o.rr.ACCEPT_ALL_CLICKED:return o.xX.PRIVACY_SETTINGS_ACCEPT_ALL;case o.rr.DECLINE_ALL_CLICKED:return o.xX.PRIVACY_SETTINGS_DECLINE_ALL;case o.rr.CONFIRM_CHOICE_CLICKED:return o.xX.PRIVACY_SETTINGS_CONFIRM_CHOICES;case o.rr.GPC_ENABLED:return o.xX.GPC_ENABLED;default:return}}},215:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>o});const o=function e(t,r){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in i)i[a]&&(s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+s}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";var e=r(330);function t(e,t){var r;r=function(e,t){return new CustomEvent(e,t)}(e,t),window.dispatchEvent(r)}const n=(t,r="")=>`${e.wR}${r}${t}`;var o=r(801);const i=["US"],s=e=>{var t;return!(null===(t=navigator)||void 0===t||!t.globalPrivacyControl)&&!!e&&i.includes(e)};var a=r(900),c=r.n(a),u=r(115),l="NOT_FOUND",E=function(e,t){return e===t};function p(e,t){var r,n,o="object"==typeof t?t:{equalityCheck:t},i=o.equalityCheck,s=void 0===i?E:i,a=o.maxSize,c=void 0===a?1:a,u=o.resultEqualityCheck,p=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}}(s),d=1===c?(r=p,{get:function(e){return n&&r(n.key,e)?n.value:l},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var o=r[n];return n>0&&(r.splice(n,1),r.unshift(o)),o.value}return l}return{get:n,put:function(t,o){n(t)===l&&(r.unshift({key:t,value:o}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(c,p);function f(){var t=d.get(arguments);if(t===l){if(t=e.apply(null,arguments),u){var r=d.getEntries().find((function(e){return u(e.value,t)}));r&&(t=r.value)}d.put(arguments,t)}return t}return f.clearCache=function(){return d.clear()},f}function d(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i,s=0,a={memoizeOptions:void 0},c=n.pop();if("object"==typeof c&&(a=c,c=n.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=a.memoizeOptions,l=void 0===u?r:u,E=Array.isArray(l)?l:[l],p=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(n),d=e.apply(void 0,[function(){return s++,c.apply(null,arguments)}].concat(E)),f=e((function(){for(var e=[],t=p.length,r=0;r<t;r++)e.push(p[r].apply(null,arguments));return i=d.apply(null,e)}));return Object.assign(f,{resultFunc:c,memoizedResultFunc:d,dependencies:p,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),f}}var f=d(p);const _=f((e=>e.purposeLimitations),(e=>e.member||{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null})),m=f((e=>e.purposeLimitations),(e=>e.guest||{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null})),T="privacyCookieModalSeen";var S;!function(e){e.PURPOSE_LIMITATIONS="persist:purposeLimitations",e.CONTEXT_FRAMES="persist:contextFrames",e.ROOT="persist:nike-privacy"}(S||(S={}));const I=["US"],g=["AT","BE","BG","HR","CA","CZ","DK","FI","GR","HU","IE","LU","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IL","ZA","TR","US","IT","DE","FR","SG","ID","MX","MY","VN","PH","IN","TH","AU","JP","TW"],y=["AT","BE","BG","CH","CZ","DE","DK","ES","FI","FR","GB","GR","HR","HU","IE","IT","LU","NL","NO","PL","PT","RO","SE","SI","SK"],h=new Date((new Date).getTime()+864e5),v=".nike.com",O=["privacy","do-not-share-my-data"];var R;!function(e){e.INFO="color:white;background-color:orange;padding:5px",e.ERROR="color:white;background-color:red;padding:5px"}(R||(R={}));const P=["AT","BE","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LU","NL","PL","PT","SI","ES","SE","BG","HR","NO","RO","SK","CH","GB"],w=async({request:t,isLoggedIn:r,memberLocation:n})=>{const i={url:t.url,status:null,body:null};try{const e=await fetch(t);if(e.status>=400)throw i.body=await e.text(),i.status=e.status,new Error(`status: ${e.status} message: ${e.statusText}`);return e}catch(t){const{status:s,url:a,body:c}=i;return(0,o.SW)(e.xX.PRIVACY_CORE_API_ERROR,{user_type:(0,o.lo)(r),consent:"",geolocation:(0,o.QF)(),error_message:`${t}`,api_url:a,...s&&{status_code:`${s}`},...c&&{response_body:c},...n&&{registered_country:n}}),Promise.reject(t)}},b=async({language:e,userExperience:t,eTag:r,isLoggedIn:n,memberLocation:o})=>{const i=new URL(`https://api.nike.com/privacy_compliance/context_frames/v2/experience/${t}/language/${e}`),s=new Request(i.toString(),{headers:{...r&&{"If-None-Match":r}}});return w({request:s,isLoggedIn:n,memberLocation:o})};function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var M="function"==typeof Symbol&&Symbol.observable||"@@observable",G=function(){return Math.random().toString(36).substring(7).split("").join(".")},U={INIT:"@@redux/INIT"+G(),REPLACE:"@@redux/REPLACE"+G(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+G()}};function x(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(C(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(C(1));return r(x)(e,t)}if("function"!=typeof e)throw new Error(C(2));var o=e,i=t,s=[],a=s,c=!1;function u(){a===s&&(a=s.slice())}function l(){if(c)throw new Error(C(3));return i}function E(e){if("function"!=typeof e)throw new Error(C(4));if(c)throw new Error(C(5));var t=!0;return u(),a.push(e),function(){if(t){if(c)throw new Error(C(6));t=!1,u();var r=a.indexOf(e);a.splice(r,1),s=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(C(7));if(void 0===e.type)throw new Error(C(8));if(c)throw new Error(C(9));try{c=!0,i=o(i,e)}finally{c=!1}for(var t=s=a,r=0;r<t.length;r++)(0,t[r])();return e}return p({type:U.INIT}),(n={dispatch:p,subscribe:E,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error(C(10));o=e,p({type:U.REPLACE})}})[M]=function(){var e,t=E;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(C(11));function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[M]=function(){return this},e},n}var D=x;function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var k="persist:",j="persist/FLUSH",B="persist/REHYDRATE",z="persist/PAUSE",H="persist/PERSIST",X="persist/PURGE",V="persist/REGISTER";function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t,r,n){n.debug;var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(r,!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return e&&"object"===$(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===r[n]&&(o[n]=e[n])})),o}function Z(e){return JSON.stringify(e)}function J(e){var t,r=e.transforms||[],n="".concat(void 0!==e.keyPrefix?e.keyPrefix:k).concat(e.key),o=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:Y,o.getItem(n).then((function(e){if(e)try{var n={},o=t(e);return Object.keys(o).forEach((function(e){n[e]=r.reduceRight((function(t,r){return r.out(t,e,o)}),t(o[e]))})),n}catch(e){throw e}}))}function Y(e){return JSON.parse(e)}function Q(e){}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(r,!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){var r=void 0!==e.version?e.version:-1,n=(e.debug,void 0===e.stateReconciler?q:e.stateReconciler),o=e.getStoredState||J,i=void 0!==e.timeout?e.timeout:5e3,s=null,a=!1,c=!0,u=function(e){return e._persist.rehydrated&&s&&!c&&s.update(e),e};return function(l,E){var p=l||{},d=p._persist,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(p,["_persist"]);if(E.type===H){var _=!1,m=function(t,r){_||(E.rehydrate(e.key,t,r),_=!0)};if(i&&setTimeout((function(){!_&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),i),c=!1,s||(s=function(e){var t,r=e.blacklist||null,n=e.whitelist||null,o=e.transforms||[],i=e.throttle||0,s="".concat(void 0!==e.keyPrefix?e.keyPrefix:k).concat(e.key),a=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:Z;var c=e.writeFailHandler||null,u={},l={},E=[],p=null,d=null;function f(){if(0===E.length)return p&&clearInterval(p),void(p=null);var e=E.shift(),r=o.reduce((function(t,r){return r.in(t,e,u)}),u[e]);if(void 0!==r)try{l[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete l[e];0===E.length&&(Object.keys(l).forEach((function(e){void 0===u[e]&&delete l[e]})),d=a.setItem(s,t(l)).catch(m))}function _(e){return!(n&&-1===n.indexOf(e)&&"_persist"!==e||r&&-1!==r.indexOf(e))}function m(e){c&&c(e)}return{update:function(e){Object.keys(e).forEach((function(t){_(t)&&u[t]!==e[t]&&-1===E.indexOf(t)&&E.push(t)})),Object.keys(u).forEach((function(t){void 0===e[t]&&_(t)&&-1===E.indexOf(t)&&void 0!==u[t]&&E.push(t)})),null===p&&(p=setInterval(f,i)),u=e},flush:function(){for(;0!==E.length;)f();return d||Promise.resolve()}}}(e)),d)return te({},t(f,E),{_persist:d});if("function"!=typeof E.rehydrate||"function"!=typeof E.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return E.register(e.key),o(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then((function(e){m(e)}),(function(e){m(void 0,e)}))}),(function(e){m(void 0,e)})),te({},t(f,E),{_persist:{version:r,rehydrated:!1}})}if(E.type===X)return a=!0,E.result(function(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:k).concat(e.key);return t.removeItem(r,Q)}(e)),te({},t(f,E),{_persist:d});if(E.type===j)return E.result(s&&s.flush()),te({},t(f,E),{_persist:d});if(E.type===z)c=!0;else if(E.type===B){if(a)return te({},f,{_persist:te({},d,{rehydrated:!0})});if(E.key===e.key){var T=t(f,E),S=E.payload,I=te({},!1!==n&&void 0!==S?n(S,l,T,e):T,{_persist:te({},d,{rehydrated:!0})});return u(I)}}if(!d)return t(l,E);var g=t(f,E);return g===f?l:u(te({},g,{_persist:d}))}}function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(r,!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce={registry:[],bootstrapped:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return se({},e,{registry:[].concat(oe(e.registry),[t.key])});case B:var r=e.registry.indexOf(t.key),n=oe(e.registry);return n.splice(r,1),se({},e,{registry:n,bootstrapped:0===n.length});default:return e}};function le(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var Ee=le();Ee.withExtraArgument=le;const pe=Ee,de="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0!==t.length)return"object"==typeof t[0]?F:F(...t)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var fe=r(110);const _e={key:"nike-privacy",storage:fe.A,blacklist:[e.v_,e.$Q]},me={key:e.v_,storage:fe.A,blacklist:["error"]},Te={key:e.$Q,storage:fe.A,blacklist:["error"]};var Se,Ie;!function(e){e.GET_CONTEXT_FRAMES_MEMBER_PENDING="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_PENDING",e.GET_CONTEXT_FRAMES_MEMBER_SUCCESS="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_SUCCESS",e.GET_CONTEXT_FRAMES_MEMBER_FAIL="@privacy-core/GET_CONTEXT_FRAMES_MEMBER_FAIL"}(Se||(Se={})),function(e){e.GET_CONTEXT_FRAMES_GUEST_PENDING="@privacy-core/GET_CONTEXT_FRAMES_GUEST_PENDING",e.GET_CONTEXT_FRAMES_GUEST_SUCCESS="@privacy-core/GET_CONTEXT_FRAMES_GUEST_SUCCESS",e.GET_CONTEXT_FRAMES_GUEST_FAIL="@privacy-core/GET_CONTEXT_FRAMES_GUEST_FAIL"}(Ie||(Ie={}));const ge={...Se,...Ie,RESET_CONTEXT_FRAMES_MEMBER:"@privacy-core/RESET_CONTEXT_FRAMES_MEMBER"};var ye,he,ve,Oe,Re;!function(e){e.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_PENDING",e.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS",e.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL="@privacy-core/GET_PURPOSE_LIMITATIONS_MEMBER_FAIL"}(ye||(ye={})),function(e){e.GET_PURPOSE_LIMITATIONS_GUEST_PENDING="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST_PENDING",e.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS",e.GET_PURPOSE_LIMITATIONS_GUEST_FAIL="@privacy-core/GET_PURPOSE_LIMITATIONS_GUEST"}(he||(he={})),function(e){e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING",e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS",e.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL"}(ve||(ve={})),function(e){e.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING",e.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS",e.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL="@privacy-core/UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL"}(Oe||(Oe={})),function(e){e.RESET_PURPOSE_LIMITATIONS_MEMBER="@privacy-core/RESET_PURPOSE_LIMITATIONS_MEMBER",e.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER="@privacy-core/RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER",e.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST="@privacy-core/RESET_ERROR_PURPOSE_LIMITATIONS_GUEST"}(Re||(Re={}));const Pe={...ye,...he,...ve,...Oe,...Re},we={guest:{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null,lastUpdatedTimestamp:null,initialConsentTimestamp:null},member:{userId:null,purposeLimitations:[],purposeLimitationsLevels:{},loading:!1,error:null}},be={guest:{contextFrames:[],language:"",eTag:"",loading:!1,error:null},member:{contextFrames:[],language:"",eTag:"",loading:!1,error:null}},Ae=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:U.INIT}))throw new Error(C(12));if(void 0===r(void 0,{type:U.PROBE_UNKNOWN_ACTION()}))throw new Error(C(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},a=0;a<s.length;a++){var c=s[a],u=r[c],l=e[c],E=u(l,t);if(void 0===E)throw t&&t.type,new Error(C(14));o[c]=E,n=n||E!==l}return(n=n||s.length!==Object.keys(e).length)?o:e}}({[e.v_]:ne(me,((e=we,t)=>{switch(t.type){case Pe.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case Pe.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case Pe.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL:return{...we,member:{...we.member,error:t.payload}};case Pe.GET_PURPOSE_LIMITATIONS_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case Pe.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case Pe.GET_PURPOSE_LIMITATIONS_GUEST_FAIL:return{...we,guest:{...we.guest,error:t.payload}};case Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL:return{...e,member:{...e.member,error:t.payload}};case Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL:return{...e,guest:{...e.guest,error:t.payload}};case Pe.RESET_PURPOSE_LIMITATIONS_MEMBER:return{...e,member:{...we.member}};case Pe.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST:return{...e,guest:{...e.guest,error:null}};case Pe.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER:return{...e,member:{...e.member,error:null}};default:return e}})),[e.$Q]:ne(Te,((e=be,t)=>{switch(t.type){case ge.GET_CONTEXT_FRAMES_MEMBER_PENDING:return{...e,member:{...e.member,loading:!0}};case ge.GET_CONTEXT_FRAMES_GUEST_PENDING:return{...e,guest:{...e.guest,loading:!0}};case ge.GET_CONTEXT_FRAMES_MEMBER_SUCCESS:return{...e,member:{...e.member,loading:!1,error:null,...t.payload}};case ge.GET_CONTEXT_FRAMES_GUEST_SUCCESS:return{...e,guest:{...e.guest,loading:!1,error:null,...t.payload}};case ge.GET_CONTEXT_FRAMES_MEMBER_FAIL:return{...e,member:{...be.member,error:t.payload}};case ge.GET_CONTEXT_FRAMES_GUEST_FAIL:return{...be,guest:{...be.guest,error:t.payload}};case ge.RESET_CONTEXT_FRAMES_MEMBER:return{...e,member:{...be.member}};default:return e}}))}),Le=D(ne(_e,Ae),de(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(C(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return n=F.apply(void 0,i)(r.dispatch),N(N({},r),{},{dispatch:n})}}}(pe))),Ne=(function(e,t,r){var n=!1,o=x(ue,ce,void 0),i=function(e){o.dispatch({type:V,key:e})},s=function(t,r,i){var s={type:B,payload:r,err:i,key:t};e.dispatch(s),o.dispatch(s),n&&a.getState().bootstrapped&&(n(),n=!1)},a=se({},o,{purge:function(){var t=[];return e.dispatch({type:X,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:j,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:z})},persist:function(){e.dispatch({type:H,register:i,rehydrate:s})}});a.persist()}(Le),(e,t)=>e.find((({category:e})=>e===t))),Ce=e=>e.reduce(((e,t)=>({...e,[t.category]:t.level})),{}),Me=t=>{const r=Ne(t,e.Nx.PERSONALIZATION_TARGETED_COMMS),n=Ne(t,e.Nx.TARGETING_BEHAVIORAL_EVENTS),o=Ne(t,e.Nx.PERFORMANCE),i=!!(null==n?void 0:n.isEnabled),s=((e,t)=>!(e||!(null==t?void 0:t.isEnabled))||!(!(null==e?void 0:e.isEnabled)||!(null==t?void 0:t.isEnabled)))(r,o);let a;return i||s||(a=0),!i&&s&&(a=1),i&&!s&&(a=2),i&&s&&(a=3),a},Ge=t=>{c().remove(e.Ng,{path:"/",domain:"www.nike.com"});const r=Me(t);void 0!==r&&c().set("sq",`${r}`,{expires:h,path:"/",domain:v})},Ue=e=>!!e&&g.includes(e)&&P.includes(e),xe=t=>{const r=JSON.parse(JSON.stringify(t)),n=r.consent;delete r.consent;const o=(t=>{const r={isEnabled:!1,isDefault:!1};switch(t){case e.aR.ACCEPT:r.isEnabled=!0,r.isDefault=!1;break;case e.aR.DECLINE:r.isEnabled=!1,r.isDefault=!1;break;case e.aR.DEFAULT_ACCEPT:r.isEnabled=!0,r.isDefault=!0;break;case e.aR.DEFAULT_DECLINE:r.isEnabled=!1,r.isDefault=!0}return r})(n);return r.isEnabled=o.isEnabled,r.isDefault=o.isDefault,r},De=e=>e.map((e=>(e=>{const t=JSON.parse(JSON.stringify(e)),r=xe(t);return{...r,userLicenses:r.userLicenses.map((e=>xe(e)))}})((e=>{const t=JSON.parse(JSON.stringify(e));return delete t.level,{...t,userLicenses:t.userLicenses.map((e=>{const t={...e};return delete t.level,t}))}})(e)))),Fe=async({contextFrameToUpdate:t,accessToken:r,language:n,userExperience:o,memberLocation:i})=>{if(!r||!t.contextFrameId||!t.contextFrameVersionId)throw new Error("Incorrect Context Frames data provided to update Purpose limitations");const{contextFrameId:s,...a}=t,c=((t,r)=>{const n=(()=>{const e=window.location.pathname.split("/");return e.find(((t,r)=>O.includes(e[r-1])))})();return(0,u.decamelizeKeys)({...t,...n&&{originApplication:n},language:r,selectionTimestamp:(new Date).toISOString(),consentSelections:t.consentSelections.map((t=>({...t,consent:!0===t.consent?e.aR.ACCEPT:e.aR.DECLINE})))})})(a,n),l=await(async({accessToken:e,userExperience:t,contextFrameToUpdateBody:r,contextFrameId:n,memberLocation:o})=>{const i=new Headers({Authorization:`Bearer ${e}`}),s=new URL(`https://api.nike.com/privacy_compliance/consent/v2/context_frame/${n}`);s.search=new URLSearchParams({experience:t}).toString();const a=new Request(s.toString(),{body:JSON.stringify(r),headers:i,method:"PUT"});return w({request:a,isLoggedIn:Boolean(e),memberLocation:o})})({accessToken:r,contextFrameToUpdateBody:c,contextFrameId:s,userExperience:o,memberLocation:i});if(200!==l.status)throw new Error(`${l.status} ${l.statusText}`);const E=await l.json();return(0,u.camelizeKeys)(E)},ke=()=>{const{purposeLimitations:e,error:t}=_(Le.getState());return!(t||!e||!e.length)},je=()=>{const{purposeLimitations:e,error:t}=m(Le.getState());return!(t||!e||!e.length)},Be=e=>!0===e.isEnabled?"1":"0",ze=t=>e.Ij[t],He=t=>{const r=Object.keys(e.Nx),n=Object.values(e.Nx).indexOf(t.category);return n>=0?r[n]:void 0},Xe=e=>e.map((e=>{const t=He(e);if(void 0===t)return;const r=ze(t);return void 0!==r?`${r}=${Be(e)}`:void 0})).sort().filter((e=>void 0!==e)).join("|"),Ve=t=>{c().remove(e._r,{path:"/",domain:"www.nike.com"});const r=Xe(t);c().set(e._r,r,{expires:395,path:"/",domain:v})},$e=f((e=>e.contextFrames),(e=>e.member||{contextFrames:[],language:"",eTag:"",loading:!1,error:null})),We=f((e=>e.contextFrames),(e=>e.guest||{contextFrames:[],language:"",eTag:"",loading:!1,error:null})),Ke=({contextFrames:e,purposeLimitationsLevels:t})=>e.map((e=>{const r=((e,t)=>{const r=e.reduce(((e,r)=>{const n=t[r.purposeLimitationCategory];if(void 0===n)throw new Error(`Level for "${r.purposeLimitationCategory}" category was not found`);return e.push(n),e}),[]);return Math.max(...r)})(e.contexts,t);var n,o;return{...e,metadata:{...e.metadata,...(n=e.metadata.alwaysOnDisclosure,o=r,n?{alwaysOnDisclosure:{...n,level:o}}:{})},contexts:e.contexts.map((e=>({...e,level:t[e.purposeLimitationCategory]})))}})),qe=({contextFrame:t,memberPurposeLimitations:r,guestPurposeLimitations:n})=>{if("true"===window.localStorage.getItem(T))return!1;const o=t.contexts.some((t=>{if(t.level<=e.V2)return!1;const o=r.find((({category:e})=>e===t.purposeLimitationCategory)),i=n.find((({category:e})=>e===t.purposeLimitationCategory));return!!i&&!!o&&!i.isDefault&&o.isEnabled!==i.isEnabled}));return o||window.localStorage.setItem(T,"true"),o},Ze=({contextFrames:e,memberPurposeLimitations:t,guestPurposeLimitations:r})=>r.length?e.map((e=>({...e,isGuestAndMemberSelectionMismatched:qe({contextFrame:e,memberPurposeLimitations:t,guestPurposeLimitations:r})}))):e,Je=({language:e,userExperience:t,memberLocation:r})=>async(n,o)=>{try{n({type:ge.GET_CONTEXT_FRAMES_MEMBER_PENDING});const i=await(async({language:e,userExperience:t,memberLocation:r})=>{const{contextFrames:n,language:o,eTag:i}=$e(Le.getState()),s=await b({language:e,userExperience:t,eTag:i,isLoggedIn:!0,memberLocation:r});if(304===s.status){if((null==n?void 0:n.length)&&o)return{contextFrames:n,language:o,eTag:i};throw new Error("Something went wrong with local storage")}if(200!==s.status)throw new Error(`${s.status} ${s.statusText}`);const a=s.headers.get("ETag")||void 0,c=await s.json();return{...(0,u.camelizeKeys)(c),eTag:a}})({language:e,userExperience:t,memberLocation:r}),{purposeLimitations:s,purposeLimitationsLevels:a}=_(o()),c=m(o()).purposeLimitations,l=Ke({contextFrames:i.contextFrames,purposeLimitationsLevels:a});return n({type:ge.GET_CONTEXT_FRAMES_MEMBER_SUCCESS,payload:{contextFrames:Ze({contextFrames:l,memberPurposeLimitations:s,guestPurposeLimitations:c}),language:i.language,eTag:i.eTag}})}catch(e){return n({type:ge.GET_CONTEXT_FRAMES_MEMBER_FAIL,payload:e.message})}},Ye=({language:e,userExperience:t})=>async(r,n)=>{try{r({type:ge.GET_CONTEXT_FRAMES_GUEST_PENDING});const o=await(async({language:e,userExperience:t})=>{const{contextFrames:r,language:n,eTag:o}=We(Le.getState()),i=await b({language:e,userExperience:t,eTag:o,isLoggedIn:!1,memberLocation:void 0});if(304===i.status){if((null==r?void 0:r.length)&&n)return{contextFrames:r,language:n,eTag:o};throw new Error("Something went wrong with local storage")}if(200!==i.status)throw new Error(`${i.status} ${i.statusText}`);const s=i.headers.get("ETag")||void 0,a=await i.json();return{...(0,u.camelizeKeys)(a),eTag:s}})({language:e,userExperience:t}),{purposeLimitationsLevels:i}=m(n()),s=Ke({contextFrames:o.contextFrames,purposeLimitationsLevels:i});return r({type:ge.GET_CONTEXT_FRAMES_GUEST_SUCCESS,payload:{contextFrames:s,language:o.language,eTag:o.eTag}})}catch(e){return r({type:ge.GET_CONTEXT_FRAMES_GUEST_FAIL,payload:e.message})}},Qe=()=>({type:ge.RESET_CONTEXT_FRAMES_MEMBER}),et=(e,t)=>e.map((e=>{const r=He(e);if(!r)return e;const n=ze(r);if(!n)return e;const o=t.split("|").reduce(((e,t)=>{const r=t.split("=");return{...e,[r[0]]:r[1]}}),{}),i=n in o,s=Be(e),a="1"===o[n];return i&&o[n]!==s?{...e,isEnabled:a,userLicenses:e.userLicenses.map((e=>({...e,isDefault:!1,isEnabled:a})))}:e})),tt=t=>{const r=c().get(e._r);return!r||r!==Xe(t)},rt=t=>{const r=c().get(e.Ng);return!r||r!==`${Me(t)}`},nt=async({accessToken:e,userId:t,userExperience:r,memberLocation:n,noCache:o})=>{const{purposeLimitations:i}=await(async({accessToken:e,userExperience:t,memberLocation:r,noCache:n})=>{const o=await(async({accessToken:e,userExperience:t,memberLocation:r,noCache:n})=>{const o=new Headers({Authorization:`Bearer ${e}`,...n?{"Cache-Control":"no-cache"}:{}}),i=new URL("https://api.nike.com/privacy_compliance/purpose_limitations/v1");i.search=new URLSearchParams({experience:t}).toString();const s=new Request(i.toString(),{headers:o});return w({request:s,isLoggedIn:!0,memberLocation:r})})({accessToken:e,userExperience:t,memberLocation:r,noCache:n});if(200!==o.status)throw new Error(`${o.status} ${o.statusText}`);const i=await o.json();return(0,u.camelizeKeys)(i)})({accessToken:e,userExperience:r,memberLocation:n,noCache:o}),s={userId:t,purposeLimitations:De(i),purposeLimitationsLevels:Ce(i)};return tt(s.purposeLimitations)&&Ve(s.purposeLimitations),!Ue(n)&&rt(s.purposeLimitations)&&Ge(s.purposeLimitations),s},ot=async({userId:t,userExperience:r,guestLocation:n,storedPurposeLimitationsGuestState:o})=>{const i=c().get(e._r),{purposeLimitations:s,...a}=await(async(e,t)=>{if(!t)throw new Error("Location is required to get Purpose Limitations");const r=await(async({userExperience:e,guestLocation:t})=>{const r=new URL(`https://api.nike.com/privacy_compliance/purpose_limitation_defaults/v1/experience/${e}/location/${t}`);return w({request:new Request(r.toString()),isLoggedIn:!1,memberLocation:void 0})})({userExperience:e,guestLocation:t});if(200!==r.status)throw new Error(`${r.status} ${r.statusText}`);const n=await r.json();return(0,u.camelizeKeys)(n)})(r,n);let l={userId:t,purposeLimitations:De(s),purposeLimitationsLevels:Ce(s),lastUpdatedTimestamp:Date.now(),...a};const E=je(),p=((t,r)=>Object.values(e.Nx).some((e=>{if(!e)return!1;const n=r.purposeLimitationsLevels[e],o=t.purposeLimitationsLevels[e];return!(!n||!o)&&o>=3&&o>n})))(l,o),d=o.userId===t,f=(_=o.lastUpdatedTimestamp,m=n,!(!y.includes(m)||!_)&&(e=>Date.now()-e>34276608e3)(_));var _,m;return E&&!p&&d&&!f?l=((e,t,r)=>{const n=((e,t)=>t.map((t=>{const r=e.find((e=>e.category===t.category&&!e.isDefault));return r?{...t,isDefault:!1,isEnabled:r.isEnabled,userLicenses:t.userLicenses.map((e=>({...e,isDefault:!1,isEnabled:r.isEnabled})))}:t})))(t.purposeLimitations,e.purposeLimitations);return tt(n)&&Ve(n),!Ue(r)&&rt(n)&&Ge(n),{...e,purposeLimitations:n,lastUpdatedTimestamp:t.lastUpdatedTimestamp}})(l,o,n):(Ve(l.purposeLimitations),Ue(n)||Ge(l.purposeLimitations)),i&&(()=>{const e=window.location.hostname,t=(o=e.includes("www."),c().get("nikePrivacySubDomainLink")||(o?"www.nike.com":"nike.com")),r=e.split("."),n=t.split(".");var o;return!(r.length<=n.length)&&e.endsWith(`.${t.replace("www.","")}`)})()&&(l=((e,t)=>({...e,purposeLimitations:et(e.purposeLimitations,t)}))(l,i)),l},it=(e,t,r)=>async n=>{try{n({type:Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_PENDING});const{userId:o,purposeLimitationsLevels:i,initialConsentTimestamp:s}=m(Le.getState()),a=(e=>{if(!e.contextFrameId||!e.contextFrameVersionId)throw new Error("Incorrect Context Frames data provided to update Purpose limitations");const{consentSelections:t}=e,{purposeLimitations:r}=m(Le.getState());return((e,t)=>e.map((e=>{if(void 0===t[e.category])return e;const r=JSON.parse(JSON.stringify(e)),{isEnabled:n,isDefault:o}=t[e.category];return r.isEnabled=n,r.isDefault=o,r.userLicenses.forEach((e=>{e.isEnabled=n,e.isDefault=o})),r})))(r,(e=>e.reduce(((e,t)=>{return{...e,[t.purposeLimitationCategory]:(r=t.consent,r?{isEnabled:!0,isDefault:!1}:{isEnabled:!1,isDefault:!1})};var r}),{}))(t))})(e);Ve(a),Ue(r)||Ge(a);const c=((e,t)=>t?e||Date.now():e)(s,t);return n({type:Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_SUCCESS,payload:{purposeLimitations:a,purposeLimitationsLevels:i,initialConsentTimestamp:c,userId:o,lastUpdatedTimestamp:Date.now()}})}catch(e){return n({type:Pe.UPDATE_PURPOSE_LIMITATIONS_GUEST_FAIL,payload:e.message})}},st=()=>({type:Pe.RESET_PURPOSE_LIMITATIONS_MEMBER});class at{constructor(r){this.getLanguage=e=>{switch(e){case"no-NO":return"nb-NO";case"zh-Hant-TW":return"zh-TW";case"es-LA":return"es-MX";default:return e}},this.getGuestId=async e=>{const t=await e.getVisitData();if(t)return t.visitor||t.visitorId},this.getMemberId=async e=>{var t;return null===(t=await e.getUserProfile())||void 0===t?void 0:t.upmId},this.getUserId=async(e,t)=>{const r=e?await this.getMemberId(t):await this.getGuestId(t);if(void 0===r)throw new Error("Get user id error");return r},this.checkIsEnabled=()=>{var e,t,r,n;const o=c().get("privacyCoreEnabled"),i=c().get("privacyCoreEnabledCountries"),s=c().get("privacyCoreDisabledCountries"),a=(null===(n=null===(r=null===(t=null===(e=window.webShellClient)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.get)||void 0===r?void 0:r.call(t).country)||void 0===n?void 0:n.toUpperCase())||"",u=i&&i.split(","),l=s&&s.split(",");return!!a&&(o?"true"===o:!(!u||!u.includes(a))||(!l||!l.includes(a))&&g.includes(a))},this.checkIsCPRAEnabled=()=>{var e,t,r,n;const o=c().get("cpraEnabled");if(o)return"true"===o;const i=(null===(n=null===(r=null===(t=null===(e=window.webShellClient)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.get)||void 0===r?void 0:r.call(t).country)||void 0===n?void 0:n.toUpperCase())||"";return I.includes(i)},this.clearBrowserDataRelatedToPrivacy=()=>{c().remove(e.Ng,{path:"/",domain:"www.nike.com"}),c().remove(e.Ng,{path:"/",domain:v}),c().remove(e._r,{path:"/",domain:"www.nike.com"}),c().remove(e._r,{path:"/",domain:v}),[S.PURPOSE_LIMITATIONS,S.CONTEXT_FRAMES,S.ROOT,T].forEach((e=>window.localStorage.removeItem(e)))},this.updateMemberGpcValues=async({accessToken:t,language:r,userExperience:n,memberLocation:o,userId:i})=>{const s=this.store.getState(),a=$e(s).contextFrames.find((t=>t.metadata.contextFrameName===e.P2.WEB_MEMBER_SETTINGS));if(!a)throw new Error("Can not find context frame");const c=a.contexts.filter((t=>t.purposeLimitationCategory===e.Nx.TARGETING_BEHAVIORAL_EVENTS||t.purposeLimitationCategory===e.Nx.TARGETING_HASHEDMATCH));if(!c.length)return Promise.resolve();const{purposeLimitations:u}=_(s),l={contextFrameId:a.metadata.contextFrameId,contextFrameVersionId:a.metadata.contextFrameVersionId,contextFrameConfirmLabelShown:!!a.metadata.contextFrameConfirmLabel,consentSelectionSource:e.S_.ADVERTISING_DATA_SHARING_GPC_SWITCH,consentSelections:c.reduce(((e,t)=>{const r=u.find((e=>e.category===t.purposeLimitationCategory));if(!r)throw new Error("Corresponded PL does not exist");return r.isDefault||r.isEnabled?[...e,{purposeLimitationCategory:t.purposeLimitationCategory,consent:!1,level:t.level,consentSelectionControlType:t.consentSelectionControlMapping.multiPermission[t.level]}]:e}),[])};if(l.consentSelections.length<=0)return Promise.resolve();if(await this.setInteractionMember({accessToken:t,language:r,userExperience:n,memberLocation:o,contextFrameToUpdate:l,uniqueEventsPrefix:"_updatingMemberGpc",userId:i}),_(s).error)throw new Error("Initialize GPC error");return Promise.resolve()},this.updateGuestGpcValues=async({guestLocation:t})=>{const r=this.store.getState(),n=We(r).contextFrames.find((t=>t.metadata.contextFrameName===e.P2.WEB_GUEST_SETTINGS));if(!n)throw new Error("Can not find context frame");const o=n.contexts.filter((t=>t.purposeLimitationCategory===e.Nx.TARGETING_BEHAVIORAL_EVENTS||t.purposeLimitationCategory===e.Nx.TARGETING_HASHEDMATCH));if(!o.length)return Promise.resolve();const{purposeLimitations:i}=m(r),s={contextFrameId:n.metadata.contextFrameId,contextFrameVersionId:n.metadata.contextFrameVersionId,contextFrameConfirmLabelShown:!!n.metadata.contextFrameConfirmLabel,consentSelectionSource:e.S_.ADVERTISING_DATA_SHARING_GPC_SWITCH,consentSelections:o.reduce(((e,t)=>{const r=i.find((e=>e.category===t.purposeLimitationCategory));if(!r)throw new Error("Corresponded PL does not exist");return r.isDefault||r.isEnabled?[...e,{purposeLimitationCategory:t.purposeLimitationCategory,consent:!1,level:t.level,consentSelectionControlType:t.consentSelectionControlMapping.multiPermission[t.level]}]:e}),[])};if(s.consentSelections.length<=0)return Promise.resolve();if(await this.setInteractionGuest(s,"_updatingGuestGpc",t),m(r).error)throw new Error("Initialize GPC error");return Promise.resolve()},this.initializeMember=async({accessToken:e,userId:t,language:r,userExperience:n,memberLocation:o})=>{const{userId:i}=_(this.store.getState());i&&i!==t&&(this.store.dispatch(st()),this.store.dispatch(Qe())),await this.store.dispatch((({accessToken:e,userId:t,userExperience:r,memberLocation:n})=>async o=>{try{o({type:Pe.GET_PURPOSE_LIMITATIONS_MEMBER_PENDING});const i=await nt({accessToken:e,userId:t,userExperience:r,memberLocation:n,noCache:!1});return o({type:Pe.GET_PURPOSE_LIMITATIONS_MEMBER_SUCCESS,payload:i})}catch(e){return o({type:Pe.GET_PURPOSE_LIMITATIONS_MEMBER_FAIL,payload:e.message})}})({accessToken:e,userId:t,userExperience:n,memberLocation:o})),await this.store.dispatch(Je({language:r,userExperience:n,memberLocation:o}));const a=this.store.getState(),{error:c}=_(a),{error:u}=$e(a);if(c||u)throw new Error("Initialize member error");s(o)&&await this.updateMemberGpcValues({accessToken:e,language:r,userExperience:n,memberLocation:o,userId:t})},this.initializeGuest=async({userId:e,language:t,userExperience:r,guestLocation:n})=>{await this.store.dispatch((({userId:e,userExperience:t,guestLocation:r})=>async(n,o)=>{try{n({type:Pe.GET_PURPOSE_LIMITATIONS_GUEST_PENDING});const i=m(o()),s=await ot({userId:e,userExperience:t,guestLocation:r,storedPurposeLimitationsGuestState:i});return n({type:Pe.GET_PURPOSE_LIMITATIONS_GUEST_SUCCESS,payload:s})}catch(e){return n({type:Pe.GET_PURPOSE_LIMITATIONS_GUEST_FAIL,payload:e.message})}})({userId:e,userExperience:r,guestLocation:n})),await this.store.dispatch(Ye({language:t,userExperience:r}));const o=this.store.getState(),i=m(o).error,a=We(o).error,c=!!Object.keys(o.purposeLimitations.member).length,u=!!Object.keys(o.contextFrames.member).length;if(c&&this.store.dispatch(st()),u&&this.store.dispatch(Qe()),window.localStorage.removeItem(T),i||a)throw new Error("Initialize guest error");s(n)&&await this.updateGuestGpcValues({guestLocation:n})},this.initialize=async({accessToken:e,userId:t,language:r,userExperience:n,memberLocation:o,guestLocation:i})=>e?await this.initializeMember({accessToken:e,userId:t,language:r,userExperience:n,memberLocation:o}):await this.initializeGuest({userId:t,language:r,userExperience:n,guestLocation:i}),this.getPermissionMember=e=>{if(!ke())throw new Error("Can not retrieve permissions");const{purposeLimitations:t}=_(this.store.getState());return Ne(t,e)},this.getPermissionGuest=e=>{if(!je())throw new Error("Can not retrieve permissions");const{purposeLimitations:t}=m(this.store.getState());return Ne(t,e)},this.getPermissionsAllMember=()=>{if(!ke())throw new Error("Can not retrieve permissions");const{purposeLimitations:e}=_(this.store.getState());return e},this.getPermissionsAllGuest=()=>{if(!je())throw new Error("Can not retrieve permissions");const{purposeLimitations:e}=m(this.store.getState());return e},this.getStoredGuestPermission=e=>{if(!je())return;const{purposeLimitations:t}=m(this.store.getState());return Ne(t,e)},this.getPermission=({name:e,accessToken:t})=>t?this.getPermissionMember(e):this.getPermissionGuest(e),this.getPermissionsAll=e=>e?this.getPermissionsAllMember():this.getPermissionsAllGuest(),this.getInteractionGuest=()=>{const e=je(),{contextFrames:t,error:r}=We(this.store.getState());if(!e||r)throw new Error("Get interaction error");return t},this.getInteractionMember=()=>{const e=ke(),{contextFrames:t,error:r}=$e(this.store.getState());if(!e||r)throw new Error("Get interaction error");return t},this.getInteraction=({name:e,accessToken:t})=>{const r=t?this.getInteractionMember():this.getInteractionGuest();if(r)return((e,t)=>e.find((({metadata:e})=>e.contextFrameName===t)))(r,e)},this.setInteractionGuest=async(r,o,i,s=!1)=>{t(n(e.B1.PERMISSIONS_UPDATING,o)),await this.store.dispatch(it(r,!!s,i));const{error:a}=m(this.store.getState());if(a)throw this.store.dispatch({type:Pe.RESET_ERROR_PURPOSE_LIMITATIONS_GUEST}),new Error("Set interaction error")},this.setInteractionMember=async({accessToken:r,language:o,userExperience:i,contextFrameToUpdate:s,uniqueEventsPrefix:a,memberLocation:c,userId:u})=>{var l;t(n(e.B1.PERMISSIONS_UPDATING,a)),await this.store.dispatch((l={accessToken:r,language:o,userExperience:i,contextFrameToUpdate:s,memberLocation:c,userId:u},async e=>{try{e({type:Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_PENDING}),await Fe(l);const t=await nt({accessToken:l.accessToken,userId:l.userId,userExperience:l.userExperience,memberLocation:l.memberLocation,noCache:!0});return e({type:Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_SUCCESS,payload:t})}catch(t){return e({type:Pe.UPDATE_PURPOSE_LIMITATIONS_MEMBER_FAIL,payload:t.message})}}));const{error:E}=_(this.store.getState());if(E)throw this.store.dispatch({type:Pe.RESET_ERROR_PURPOSE_LIMITATIONS_MEMBER}),new Error("Set interaction error");window.localStorage.setItem(T,"true")},this.setInteraction=async({accessToken:e,language:t,userExperience:r,guestLocation:n,memberLocation:o,userId:i,contextFrameToUpdate:s,uniqueEventsPrefix:a,captureInitialConsent:c})=>e?await this.setInteractionMember({accessToken:e,language:t,userExperience:r,contextFrameToUpdate:s,uniqueEventsPrefix:a,memberLocation:o,userId:i}):await this.setInteractionGuest(s,a,n,c),this.store=r}}var ct,ut,lt,Et,pt,dt,ft,_t,mt,Tt,St,It=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},gt=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class yt{constructor(r){ct.set(this,void 0),ut.set(this,void 0),lt.set(this,void 0),Et.set(this,void 0),pt.set(this,void 0),dt.set(this,void 0),ft.set(this,void 0),_t.set(this,void 0),mt.set(this,"0.118.0"),Tt.set(this,{resolve:void 0,reject:void 0,initializationError:void 0}),St.set(this,new Promise(((e,t)=>{gt(this,Tt,"f").resolve=e,gt(this,Tt,"f").reject=t})).catch((e=>(gt(this,Tt,"f").initializationError=e,Promise.resolve(!1))))),this.__clearBrowserStorage__=()=>{gt(this,pt,"f").clearBrowserDataRelatedToPrivacy(),console.log("%c  Result:  ",R.INFO,"All browser storage related to privacy-core is cleared")},this.initialize=async({webShellIdentity:r,country:i,language:s})=>{var a,c,u,l,E;try{if(void 0===gt(this,ft,"f")&&this.isEnabled,void 0===gt(this,_t,"f")&&this.isCPRAEnabled,!gt(this,ft,"f"))throw new Error("NikePrivacy is not allowed to use");if(void 0===yt._userExperience)throw new Error("user experience is not defined in .env file");if(!r)throw new Error("web shell identity does not exist");if(yt._initializedInstance)return await yt._initializedInstance;It(this,ut,i,"f"),It(this,lt,gt(this,pt,"f").getLanguage(s),"f"),It(this,ct,await r.getAccessToken(),"f"),It(this,dt,gt(this,ct,"f")?null===(a=await r.getUserProfile())||void 0===a?void 0:a.registeredCountry:"","f"),It(this,Et,await gt(this,pt,"f").getUserId(gt(this,ct,"f"),r),"f");const e=gt(this,pt,"f").initialize({accessToken:gt(this,ct,"f"),userId:gt(this,Et,"f"),language:gt(this,lt,"f"),userExperience:yt._userExperience,guestLocation:gt(this,ut,"f"),memberLocation:gt(this,dt,"f")});yt._initializedInstance=e;const t=await e;return null===(u=(c=gt(this,Tt,"f")).resolve)||void 0===u||u.call(c,!0),t}catch(r){return t(n(e.B1.INITIALIZE_ERROR)),(0,o.SW)(e.xX.INITIALIZE_ERROR,{user_type:(0,o.lo)(!!gt(this,ct,"f")),error_message:`${r}`,geolocation:(0,o.QF)(),...gt(this,dt,"f")&&{registered_country:gt(this,dt,"f")}}),null===(E=(l=gt(this,Tt,"f")).reject)||void 0===E||E.call(l,r),Promise.resolve(void 0)}finally{t(n(e.B1.INITIALIZED))}},this.permissions={name:e.p,get:(r,i)=>{try{if(void 0===yt._initializedInstance)throw new Error("NikePrivacy is not initialized");if(void 0===r){const e=gt(this,pt,"f").getPermissionsAll(gt(this,ct,"f"));if(!e)throw new Error("Can not get all permissions");return e}const t=Object.keys(e.p).reduce(((t,r)=>(t[e.p[r]]=()=>gt(this,pt,"f").getPermission({name:e.Nx[r],accessToken:gt(this,ct,"f")}),t)),{});if(!(r in t))throw new Error("Can not get permission");return t[r]()}catch(r){return t(n(e.B1.PERMISSIONS_GET_ERROR,null!=i?i:"")),void(0,o.SW)(e.xX.PERMISSIONS_GET_ERROR,{user_type:(0,o.lo)(!!gt(this,ct,"f")),error_message:`${r}`,geolocation:(0,o.QF)(),...gt(this,dt,"f")&&{registered_country:gt(this,dt,"f")}})}}},this.interactions={get:(r,i="")=>{try{if(void 0===yt._initializedInstance)throw new Error("NikePrivacy is not initialized");const t=Object.keys(e.x4).reduce(((t,r)=>(t[e.x4[r]]=()=>gt(this,pt,"f").getInteraction({name:e.P2[r],accessToken:gt(this,ct,"f")}),t)),{});if(!t[r])throw new Error("Can not get interaction");return t[r]()}catch(r){return t(n(e.B1.CONTEXT_FRAMES_GET_ERROR,i)),void(0,o.SW)(e.xX.CONTEXT_FRAMES_GET_ERROR,{user_type:(0,o.lo)(!!gt(this,ct,"f")),error_message:`${r}`,geolocation:(0,o.QF)(),...gt(this,dt,"f")&&{registered_country:gt(this,dt,"f")}})}},set:async(r,i="",s=!1)=>{try{if(void 0===yt._initializedInstance)throw new Error("NikePrivacy is not initialized");const o=await gt(this,pt,"f").setInteraction({accessToken:gt(this,ct,"f"),language:gt(this,lt,"f"),guestLocation:gt(this,ut,"f"),memberLocation:gt(this,dt,"f"),userId:gt(this,Et,"f"),contextFrameToUpdate:r,userExperience:yt._userExperience,uniqueEventsPrefix:i,captureInitialConsent:s});return t(n(e.B1.PERMISSIONS_UPDATED,i)),o}catch(r){return t(n(e.B1.PERMISSIONS_UPDATE_ERROR,i)),(0,o.SW)(e.xX.PERMISSIONS_UPDATE_ERROR,{user_type:(0,o.lo)(!!gt(this,ct,"f")),error_message:`${r}`,geolocation:(0,o.QF)(),...gt(this,dt,"f")&&{registered_country:gt(this,dt,"f")}}),Promise.resolve(void 0)}}},It(this,pt,new at(r),"f")}get __VERSION__(){return gt(this,mt,"f")||""}get isEnabled(){try{return It(this,ft,gt(this,pt,"f").checkIsEnabled(),"f"),gt(this,ft,"f")}catch(e){return!1}}get isCPRAEnabled(){try{return It(this,_t,gt(this,pt,"f").checkIsCPRAEnabled(),"f"),gt(this,_t,"f")}catch(e){return!1}}get isModalVisible(){return!!document.querySelector(`.${e.Eg}`)}isInitialized(){return gt(this,Tt,"f").initializationError?Promise.reject(gt(this,Tt,"f").initializationError):gt(this,St,"f")}}ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,Et=new WeakMap,pt=new WeakMap,dt=new WeakMap,ft=new WeakMap,_t=new WeakMap,mt=new WeakMap,Tt=new WeakMap,St=new WeakMap,yt._userExperience="nikedotcom",r(574),window.NikePrivacy=new yt(Le)})(),n.default})()));
//# sourceMappingURL=privacy-core.js.map